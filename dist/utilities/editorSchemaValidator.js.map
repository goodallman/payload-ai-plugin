{"version":3,"sources":["../../src/utilities/editorSchemaValidator.ts"],"sourcesContent":["import ajvModule from 'ajv'\r\n\r\nexport const editorSchemaValidator = (schema) => {\r\n  const modifiedSchema = JSON.parse(JSON.stringify(schema), function (key: string, value: any) {\r\n    if (key === 'required' && Array.isArray(value)) {\r\n      // Safely access properties from parent\r\n      const parent = this as { properties?: Record<string, any> }\r\n      const parentProperties = parent.properties\r\n\r\n      if (parentProperties) {\r\n        const requiredFields = ['type'] // type is always required\r\n\r\n        // Check if this node has children property\r\n        if ('children' in parentProperties) {\r\n          requiredFields.push('children')\r\n        }\r\n\r\n        // Check if this node has text property\r\n        if ('text' in parentProperties) {\r\n          requiredFields.push('text')\r\n        }\r\n\r\n        const filteredRequired = value.filter((field) => requiredFields.includes(field))\r\n        return filteredRequired.length ? filteredRequired : undefined\r\n      }\r\n    }\r\n    return value\r\n  })\r\n\r\n  const Ajv = ajvModule.default\r\n  const ajv = new Ajv()\r\n\r\n  return ajv.compile(modifiedSchema)\r\n}\r\n"],"names":["ajvModule","editorSchemaValidator","schema","modifiedSchema","JSON","parse","stringify","key","value","Array","isArray","parent","parentProperties","properties","requiredFields","push","filteredRequired","filter","field","includes","length","undefined","Ajv","default","ajv","compile"],"mappings":"AAAA,OAAOA,eAAe,MAAK;AAE3B,OAAO,MAAMC,wBAAwB,CAACC;IACpC,MAAMC,iBAAiBC,KAAKC,KAAK,CAACD,KAAKE,SAAS,CAACJ,SAAS,SAAUK,GAAW,EAAEC,KAAU;QACzF,IAAID,QAAQ,cAAcE,MAAMC,OAAO,CAACF,QAAQ;YAC9C,uCAAuC;YACvC,MAAMG,SAAS,IAAI;YACnB,MAAMC,mBAAmBD,OAAOE,UAAU;YAE1C,IAAID,kBAAkB;gBACpB,MAAME,iBAAiB;oBAAC;iBAAO,CAAC,0BAA0B;;gBAE1D,2CAA2C;gBAC3C,IAAI,cAAcF,kBAAkB;oBAClCE,eAAeC,IAAI,CAAC;gBACtB;gBAEA,uCAAuC;gBACvC,IAAI,UAAUH,kBAAkB;oBAC9BE,eAAeC,IAAI,CAAC;gBACtB;gBAEA,MAAMC,mBAAmBR,MAAMS,MAAM,CAAC,CAACC,QAAUJ,eAAeK,QAAQ,CAACD;gBACzE,OAAOF,iBAAiBI,MAAM,GAAGJ,mBAAmBK;YACtD;QACF;QACA,OAAOb;IACT;IAEA,MAAMc,MAAMtB,UAAUuB,OAAO;IAC7B,MAAMC,MAAM,IAAIF;IAEhB,OAAOE,IAAIC,OAAO,CAACtB;AACrB,EAAC"}