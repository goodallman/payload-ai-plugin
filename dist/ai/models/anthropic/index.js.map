{"version":3,"sources":["../../../../src/ai/models/anthropic/index.ts"],"sourcesContent":["import { anthropic } from '@ai-sdk/anthropic'\r\nimport { streamText } from 'ai'\r\n\r\nimport type { GenerationConfig } from '../../../types.js'\r\n\r\nimport { defaultSystemPrompt } from '../../prompts.js'\r\nimport { generateRichText } from './generateRichText.js'\r\n\r\nconst MODEL_KEY = 'ANTH-C'\r\n\r\nexport const AnthropicConfig: GenerationConfig = {\r\n  models: [\r\n    {\r\n      id: `${MODEL_KEY}-text`,\r\n      name: 'Anthropic Claude',\r\n      fields: ['text', 'textarea'],\r\n      handler: async (\r\n        prompt: string,\r\n        options: { locale: string; model: string; system: string },\r\n      ) => {\r\n        const streamTextResult = await streamText({\r\n          model: anthropic(options.model),\r\n          prompt,\r\n          system: options.system || defaultSystemPrompt,\r\n        })\r\n\r\n        return streamTextResult.toDataStreamResponse()\r\n      },\r\n      output: 'text',\r\n      settings: {\r\n        name: `${MODEL_KEY}-text-settings`,\r\n        type: 'group',\r\n        admin: {\r\n          condition(data) {\r\n            return data['model-id'] === `${MODEL_KEY}-text`\r\n          },\r\n        },\r\n        fields: [\r\n          {\r\n            name: 'model',\r\n            type: 'select',\r\n            defaultValue: 'claude-3-5-sonnet-20240620',\r\n            label: 'Model',\r\n            options: [\r\n              'claude-3-haiku-20240307',\r\n              'claude-3-sonnet-20240229',\r\n              'claude-3-opus-20240229',\r\n              'claude-3-5-sonnet-20240620',\r\n            ],\r\n          },\r\n        ],\r\n        label: 'Anthropic Claude Settings',\r\n      },\r\n    },\r\n    {\r\n      id: `${MODEL_KEY}-object`,\r\n      name: 'Anthropic Claude',\r\n      fields: ['richText'],\r\n      handler: (text: string, options) => {\r\n        return generateRichText(text, options)\r\n      },\r\n      output: 'text',\r\n      settings: {\r\n        name: `${MODEL_KEY}-object-settings`,\r\n        type: 'group',\r\n        admin: {\r\n          condition(data) {\r\n            return data['model-id'] === `${MODEL_KEY}-object`\r\n          },\r\n        },\r\n        fields: [\r\n          {\r\n            name: 'model',\r\n            type: 'select',\r\n            defaultValue: 'claude-3-5-sonnet-20240620',\r\n            label: 'Model',\r\n            options: [\r\n              'claude-3-haiku-20240307',\r\n              'claude-3-sonnet-20240229',\r\n              'claude-3-opus-20240229',\r\n              'claude-3-5-sonnet-20240620',\r\n            ],\r\n          },\r\n        ],\r\n        label: 'Anthropic Claude Settings',\r\n      },\r\n    },\r\n  ],\r\n  provider: 'Anthropic',\r\n}\r\n"],"names":["anthropic","streamText","defaultSystemPrompt","generateRichText","MODEL_KEY","AnthropicConfig","models","id","name","fields","handler","prompt","options","streamTextResult","model","system","toDataStreamResponse","output","settings","type","admin","condition","data","defaultValue","label","text","provider"],"mappings":"AAAA,SAASA,SAAS,QAAQ,oBAAmB;AAC7C,SAASC,UAAU,QAAQ,KAAI;AAI/B,SAASC,mBAAmB,QAAQ,mBAAkB;AACtD,SAASC,gBAAgB,QAAQ,wBAAuB;AAExD,MAAMC,YAAY;AAElB,OAAO,MAAMC,kBAAoC;IAC/CC,QAAQ;QACN;YACEC,IAAI,CAAC,EAAEH,UAAU,KAAK,CAAC;YACvBI,MAAM;YACNC,QAAQ;gBAAC;gBAAQ;aAAW;YAC5BC,SAAS,OACPC,QACAC;gBAEA,MAAMC,mBAAmB,MAAMZ,WAAW;oBACxCa,OAAOd,UAAUY,QAAQE,KAAK;oBAC9BH;oBACAI,QAAQH,QAAQG,MAAM,IAAIb;gBAC5B;gBAEA,OAAOW,iBAAiBG,oBAAoB;YAC9C;YACAC,QAAQ;YACRC,UAAU;gBACRV,MAAM,CAAC,EAAEJ,UAAU,cAAc,CAAC;gBAClCe,MAAM;gBACNC,OAAO;oBACLC,WAAUC,IAAI;wBACZ,OAAOA,IAAI,CAAC,WAAW,KAAK,CAAC,EAAElB,UAAU,KAAK,CAAC;oBACjD;gBACF;gBACAK,QAAQ;oBACN;wBACED,MAAM;wBACNW,MAAM;wBACNI,cAAc;wBACdC,OAAO;wBACPZ,SAAS;4BACP;4BACA;4BACA;4BACA;yBACD;oBACH;iBACD;gBACDY,OAAO;YACT;QACF;QACA;YACEjB,IAAI,CAAC,EAAEH,UAAU,OAAO,CAAC;YACzBI,MAAM;YACNC,QAAQ;gBAAC;aAAW;YACpBC,SAAS,CAACe,MAAcb;gBACtB,OAAOT,iBAAiBsB,MAAMb;YAChC;YACAK,QAAQ;YACRC,UAAU;gBACRV,MAAM,CAAC,EAAEJ,UAAU,gBAAgB,CAAC;gBACpCe,MAAM;gBACNC,OAAO;oBACLC,WAAUC,IAAI;wBACZ,OAAOA,IAAI,CAAC,WAAW,KAAK,CAAC,EAAElB,UAAU,OAAO,CAAC;oBACnD;gBACF;gBACAK,QAAQ;oBACN;wBACED,MAAM;wBACNW,MAAM;wBACNI,cAAc;wBACdC,OAAO;wBACPZ,SAAS;4BACP;4BACA;4BACA;4BACA;yBACD;oBACH;iBACD;gBACDY,OAAO;YACT;QACF;KACD;IACDE,UAAU;AACZ,EAAC"}