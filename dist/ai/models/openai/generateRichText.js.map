{"version":3,"sources":["../../../../src/ai/models/openai/generateRichText.ts"],"sourcesContent":["import { jsonSchema, streamObject } from 'ai'\r\n\r\nimport { openai } from './openai.js'\r\n\r\nexport const generateRichText = async (text: string, options: any = {}) => {\r\n  // console.log('Running handler with prompts:', options.editorSchema)\r\n  const streamResult = await streamObject({\r\n    maxTokens: options.maxTokens || 5000,\r\n    model: openai(options.model, {\r\n      structuredOutputs: true,\r\n    }),\r\n    // onFinish: (result) => {\r\n    //   console.log('Finished generating rich text:', { options, rawResponse: result.rawResponse, result })\r\n    // },\r\n    prompt: text,\r\n    schema: jsonSchema(options.editorSchema),\r\n    system: `${options.system}\r\n\r\nRULES:\r\n- Generate original and unique content based on the given topic.\r\n- Strictly adhere to the specified layout and formatting instructions.\r\n- Utilize the provided rich text editor tools for appropriate formatting.\r\n- Ensure the output follows the structure of the sample output object.\r\n- Produce valid JSON with no undefined or null values.\r\n\r\nLAYOUT INSTRUCTIONS:\r\n${options.layout}\r\n\r\nRICH TEXT EDITOR TOOLS:\r\n- Use appropriate formatting tools such as bold, italic, or underline for emphasis where needed.\r\n- Apply correct heading levels (h1, h2, h3) for hierarchical structure.\r\n- Utilize bullet points or numbered lists as required by the layout.\r\n\r\nADDITIONAL GUIDELINES:\r\n- Ensure coherence and logical flow between all sections.\r\n- Maintain a consistent tone and style throughout the content.\r\n- Use clear and concise language appropriate for the target audience.\r\n`,\r\n  })\r\n  return streamResult.toTextStreamResponse()\r\n}\r\n"],"names":["jsonSchema","streamObject","openai","generateRichText","text","options","streamResult","maxTokens","model","structuredOutputs","prompt","schema","editorSchema","system","layout","toTextStreamResponse"],"mappings":"AAAA,SAASA,UAAU,EAAEC,YAAY,QAAQ,KAAI;AAE7C,SAASC,MAAM,QAAQ,cAAa;AAEpC,OAAO,MAAMC,mBAAmB,OAAOC,MAAcC,UAAe,CAAC,CAAC;IACpE,qEAAqE;IACrE,MAAMC,eAAe,MAAML,aAAa;QACtCM,WAAWF,QAAQE,SAAS,IAAI;QAChCC,OAAON,OAAOG,QAAQG,KAAK,EAAE;YAC3BC,mBAAmB;QACrB;QACA,0BAA0B;QAC1B,wGAAwG;QACxG,KAAK;QACLC,QAAQN;QACRO,QAAQX,WAAWK,QAAQO,YAAY;QACvCC,QAAQ,CAAC,EAAER,QAAQQ,MAAM,CAAC;;;;;;;;;;AAU9B,EAAER,QAAQS,MAAM,CAAC;;;;;;;;;;;AAWjB,CAAC;IACC;IACA,OAAOR,aAAaS,oBAAoB;AAC1C,EAAC"}