{"version":3,"sources":["../../../../src/ai/models/openai/generateImage.ts"],"sourcesContent":["import type { ImageGenerateParams } from 'openai/resources/images'\r\n\r\nimport OpenAI from 'openai'\r\n\r\nexport const generateImage = async (\r\n  prompt: string,\r\n  {\r\n    size = '1024x1024',\r\n    style = 'natural',\r\n    version = 'dall-e-3',\r\n  }: {\r\n    size?: ImageGenerateParams['size']\r\n    style?: ImageGenerateParams['style']\r\n    version?: ImageGenerateParams['model']\r\n  } = {},\r\n) => {\r\n  const openaiAPI = new OpenAI()\r\n  const response = await openaiAPI.images.generate({\r\n    model: version,\r\n    n: 1,\r\n    prompt,\r\n    response_format: 'b64_json',\r\n    size,\r\n    style,\r\n  })\r\n\r\n  const { b64_json, revised_prompt } = response.data[0] || {}\r\n  return {\r\n    alt: revised_prompt,\r\n    buffer: Buffer.from(b64_json, 'base64'),\r\n  }\r\n}\r\n"],"names":["OpenAI","generateImage","prompt","size","style","version","openaiAPI","response","images","generate","model","n","response_format","b64_json","revised_prompt","data","alt","buffer","Buffer","from"],"mappings":"AAEA,OAAOA,YAAY,SAAQ;AAE3B,OAAO,MAAMC,gBAAgB,OAC3BC,QACA,EACEC,OAAO,WAAW,EAClBC,QAAQ,SAAS,EACjBC,UAAU,UAAU,EAKrB,GAAG,CAAC,CAAC;IAEN,MAAMC,YAAY,IAAIN;IACtB,MAAMO,WAAW,MAAMD,UAAUE,MAAM,CAACC,QAAQ,CAAC;QAC/CC,OAAOL;QACPM,GAAG;QACHT;QACAU,iBAAiB;QACjBT;QACAC;IACF;IAEA,MAAM,EAAES,QAAQ,EAAEC,cAAc,EAAE,GAAGP,SAASQ,IAAI,CAAC,EAAE,IAAI,CAAC;IAC1D,OAAO;QACLC,KAAKF;QACLG,QAAQC,OAAOC,IAAI,CAACN,UAAU;IAChC;AACF,EAAC"}