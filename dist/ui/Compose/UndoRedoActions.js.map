{"version":3,"sources":["../../../src/ui/Compose/UndoRedoActions.tsx"],"sourcesContent":["import type { MouseEventHandler} from 'react';\r\n\r\nimport React, { useCallback, useEffect, useState } from 'react'\r\n\r\nimport { useHistory } from './hooks/useHistory.js'\r\nimport { translateToCzech } from '../../utilities/translateToCzech.js'\r\n\r\nexport const UndoRedoActions = ({ onChange }: { onChange: (val: unknown) => void }) => {\r\n  const { canRedo, canUndo, redo, undo } = useHistory()\r\n\r\n  const redoHistoryValue = useCallback<MouseEventHandler>(\r\n    (event) => {\r\n      event.stopPropagation()\r\n\r\n      const value = redo()\r\n      if (value) {\r\n        onChange(value)\r\n      }\r\n    },\r\n    [redo],\r\n  )\r\n\r\n  const undoHistoryValue = useCallback<MouseEventHandler>(\r\n    (event) => {\r\n      event.stopPropagation()\r\n\r\n      const value = undo()\r\n      if (value) {\r\n        onChange(value)\r\n      }\r\n    },\r\n    [undo],\r\n  )\r\n\r\n  // Delay rendering until the client-side hydration is complete\r\n  const [isMounted, setIsMounted] = useState(false)\r\n\r\n  useEffect(() => {\r\n    setIsMounted(true)\r\n  }, [])\r\n\r\n  if (!isMounted || (!canUndo && !canRedo)) return null\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <button\r\n        className={`btn btn--size-small btn--style-secondary ${!canUndo && 'btn--disabled'}`}\r\n        disabled={!canUndo}\r\n        onClick={undoHistoryValue}\r\n        style={{ marginBlock: 0 }}\r\n        type=\"button\"\r\n      >\r\n        {translateToCzech('Undo')}\r\n      </button>\r\n      <button\r\n        className={`btn btn--size-small btn--style-secondary ${!canRedo && 'btn--disabled'}`}\r\n        disabled={!canRedo}\r\n        onClick={redoHistoryValue}\r\n        style={{ marginBlock: 0 }}\r\n        type=\"button\"\r\n      >\r\n        {translateToCzech('Redo')}\r\n      </button>\r\n    </React.Fragment>\r\n  )\r\n}\r\n"],"names":["React","useCallback","useEffect","useState","useHistory","translateToCzech","UndoRedoActions","onChange","canRedo","canUndo","redo","undo","redoHistoryValue","event","stopPropagation","value","undoHistoryValue","isMounted","setIsMounted","Fragment","button","className","disabled","onClick","style","marginBlock","type"],"mappings":";AAEA,OAAOA,SAASC,WAAW,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,QAAO;AAE/D,SAASC,UAAU,QAAQ,wBAAuB;AAClD,SAASC,gBAAgB,QAAQ,sCAAqC;AAEtE,OAAO,MAAMC,kBAAkB,CAAC,EAAEC,QAAQ,EAAwC;IAChF,MAAM,EAAEC,OAAO,EAAEC,OAAO,EAAEC,IAAI,EAAEC,IAAI,EAAE,GAAGP;IAEzC,MAAMQ,mBAAmBX,YACvB,CAACY;QACCA,MAAMC,eAAe;QAErB,MAAMC,QAAQL;QACd,IAAIK,OAAO;YACTR,SAASQ;QACX;IACF,GACA;QAACL;KAAK;IAGR,MAAMM,mBAAmBf,YACvB,CAACY;QACCA,MAAMC,eAAe;QAErB,MAAMC,QAAQJ;QACd,IAAII,OAAO;YACTR,SAASQ;QACX;IACF,GACA;QAACJ;KAAK;IAGR,8DAA8D;IAC9D,MAAM,CAACM,WAAWC,aAAa,GAAGf,SAAS;IAE3CD,UAAU;QACRgB,aAAa;IACf,GAAG,EAAE;IAEL,IAAI,CAACD,aAAc,CAACR,WAAW,CAACD,SAAU,OAAO;IAEjD,qBACE,MAACR,MAAMmB,QAAQ;;0BACb,KAACC;gBACCC,WAAW,CAAC,yCAAyC,EAAE,CAACZ,WAAW,gBAAgB,CAAC;gBACpFa,UAAU,CAACb;gBACXc,SAASP;gBACTQ,OAAO;oBAAEC,aAAa;gBAAE;gBACxBC,MAAK;0BAEJrB,iBAAiB;;0BAEpB,KAACe;gBACCC,WAAW,CAAC,yCAAyC,EAAE,CAACb,WAAW,gBAAgB,CAAC;gBACpFc,UAAU,CAACd;gBACXe,SAASX;gBACTY,OAAO;oBAAEC,aAAa;gBAAE;gBACxBC,MAAK;0BAEJrB,iBAAiB;;;;AAI1B,EAAC"}